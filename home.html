<!-- /Firebase3rd/home.html --> 
<section class="hero">
  <div class="hero-text">
    <h4 class="tagline">Best Coffee</h4>
    <h1>Make your day great with our special coffee!</h1>
    <p>
      Welcome to our coffee paradise, where every bean tells a story and every cup sparks joy.
    </p>
    <div class="buttons">
      <button onclick="loadPage('menu.html')" class="btn primary">Order Now</button>
      <button onclick="loadPage('about.html')" class="btn secondary">About Us</button>
    </div>
  </div>

  <!-- Carousel -->
  <div class="carousel">
    <div class="slides" id="carouselSlides"></div>
    <button class="prev" onclick="prevSlide()">&#10094;</button>
    <button class="next" onclick="nextSlide()">&#10095;</button>
    <div class="dots" id="carouselDots"></div>
  </div>
</section>

<style>
  /* Hero Layout */
  .hero {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 60px;
    padding: 80px 40px;
  }
  .hero-text {
    flex: 1;
    max-width: 500px;
  }
  .hero-text h4 {
    color: #f59e0b;
    font-size: 22px;
    margin-bottom: 12px;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .hero-text h1 {
    font-size: 48px;
    font-weight: 800;
    margin-bottom: 18px;
    line-height: 1.2;
  }
  .hero-text p {
    font-size: 18px;
    color: #9fb2c3;
    margin-bottom: 28px;
    max-width: 440px;
    line-height: 1.6;
  }
  .buttons { display: flex; gap: 14px; }
  .btn {
    padding: 12px 22px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.25s ease;
    font-size: 16px;
  }
  .btn.primary {
    background: linear-gradient(135deg, #f59e0b, #fbbf24);
    color: #0b0d10;
    box-shadow: 0 4px 14px rgba(245, 158, 11, .4);
  }
  .btn.primary:hover {
    background: linear-gradient(135deg, #d97706, #f59e0b);
    transform: translateY(-2px);
  }
  .btn.secondary {
    background: transparent;
    border: 2px solid #1f2833;
    color: #e8eef5;
  }
  .btn.secondary:hover {
    background: #1f2833;
  }

  /* Carousel */
  .carousel {
    position: relative;
    flex: 1;
    max-width: 600px;
    height: 500px;
    overflow: hidden;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,.6);
  }
  .slides {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .slides img {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: cover;
    border-radius: 20px;
    opacity: 0;
    transition: opacity 1s ease-in-out;
  }
  .slides img.active { opacity: 1; }

  .prev, .next {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,.5);
    border: none;
    padding: 12px;
    border-radius: 50%;
    color: white;
    font-size: 20px;
    cursor: pointer;
    transition: background .2s;
  }
  .prev:hover, .next:hover { background: rgba(0,0,0,.8); }
  .prev { left: 12px; }
  .next { right: 12px; }
  .dots {
    position: absolute;
    bottom: 14px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
  }
  .dots span {
    width: 12px; height: 12px;
    background: #9fb2c3;
    border-radius: 50%;
    cursor: pointer;
    transition: background .2s;
  }
  .dots span.active { background: #f59e0b; }
</style>

<script type="module">
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore.js";
  import { getApp, getApps, initializeApp } from "https://www.gstatic.com/firebasejs/11.0.0/firebase-app.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCHCZ_SAvTxHYjgmRfiCF3fW2SzB3YnFh8",
    authDomain: "my-moonbucks-firebase-id.firebaseapp.com",
    projectId: "my-moonbucks-firebase-id",
    storageBucket: "my-moonbucks-firebase-id.appspot.com",
    messagingSenderId: "361396425482",
    appId: "1:361396425482:web:557ee43bc8b5af33da20f3"
  };

  const app = getApps().length ? getApp() : initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const slidesEl = document.getElementById("carouselSlides");
  const dotsEl = document.getElementById("carouselDots");

  let currentSlide = 0;
  let products = [];

  async function loadCarousel() {
    const snap = await getDocs(collection(db, "products"));
    products = snap.docs.map(d => d.data()).filter(p => p.imageUrl);

    slidesEl.innerHTML = products.map((p,i) =>
      `<img src="${p.imageUrl}" alt="${p.name}" class="${i===0?'active':''}">`
    ).join("");

    dotsEl.innerHTML = products.map((_,i) =>
      `<span onclick="goToSlide(${i})" class="${i===0?'active':''}"></span>`
    ).join("");

    setInterval(nextSlide, 5000);
  }

  function updateCarousel() {
    const imgs = slidesEl.querySelectorAll("img");
    imgs.forEach((img,i) => img.classList.toggle("active", i===currentSlide));
    dotsEl.querySelectorAll("span").forEach((dot,i)=>dot.classList.toggle("active", i===currentSlide));
  }

  window.nextSlide = function() {
    currentSlide = (currentSlide + 1) % products.length;
    updateCarousel();
  }
  window.prevSlide = function() {
    currentSlide = (currentSlide - 1 + products.length) % products.length;
    updateCarousel();
  }
  window.goToSlide = function(i) {
    currentSlide = i;
    updateCarousel();
  }

  loadCarousel();
</script>
